{"dependencies":[{"name":"ws","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":25,"index":25}}],"key":"wL3sZyiL/7hQVF1TY61MLFTNHyg=","exportNames":["*"],"imports":1}},{"name":"./websocket.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":26},"end":{"line":2,"column":40,"index":66}}],"key":"2j+P5AP6xm2u+2Jk+BmBUfbE1q8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"WS\", {\n    enumerable: true,\n    get: function () {\n      return WS;\n    }\n  });\n  var _ws = require(_dependencyMap[0], \"ws\");\n  var ws = _interopNamespace(_ws);\n  var _websocketJs = require(_dependencyMap[1], \"./websocket.js\");\n  /**\n   * WebSocket transport based on the `WebSocket` object provided by the `ws` package.\n   *\n   * Usage: Node.js, Deno (compat), Bun (compat)\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n   * @see https://caniuse.com/mdn-api_websocket\n   */\n  class WS extends _websocketJs.BaseWS {\n    createSocket(uri, protocols, opts) {\n      var _a;\n      if ((_a = this.socket) === null || _a === void 0 ? void 0 : _a._cookieJar) {\n        opts.headers = opts.headers || {};\n        opts.headers.cookie = typeof opts.headers.cookie === \"string\" ? [opts.headers.cookie] : opts.headers.cookie || [];\n        for (const [name, cookie] of this.socket._cookieJar.cookies) {\n          opts.headers.cookie.push(`${name}=${cookie.value}`);\n        }\n      }\n      return new ws.WebSocket(uri, protocols, opts);\n    }\n    doWrite(packet, data) {\n      const opts = {};\n      if (packet.options) {\n        opts.compress = packet.options.compress;\n      }\n      if (this.opts.perMessageDeflate) {\n        const len =\n        // @ts-ignore\n        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n        if (len < this.opts.perMessageDeflate.threshold) {\n          opts.compress = false;\n        }\n      }\n      this.ws.send(data, opts);\n    }\n  }\n});","lineCount":67,"map":[[22,2,11,0,"Object"],[22,8,11,0],[22,9,11,0,"defineProperty"],[22,23,11,0],[22,24,11,0,"exports"],[22,31,11,0],[23,4,11,0,"enumerable"],[23,14,11,0],[24,4,11,0,"get"],[24,7,11,0],[24,18,11,0,"get"],[24,19,11,0],[25,6,11,0],[25,13,11,0,"WS"],[25,15,11,0],[26,4,11,0],[27,2,11,0],[28,2,1,0],[28,6,1,0,"_ws"],[28,9,1,0],[28,12,1,0,"require"],[28,19,1,0],[28,20,1,0,"_dependencyMap"],[28,34,1,0],[29,2,1,0],[29,6,1,0,"ws"],[29,8,1,0],[29,11,1,0,"_interopNamespace"],[29,28,1,0],[29,29,1,0,"_ws"],[29,32,1,0],[30,2,2,0],[30,6,2,0,"_websocketJs"],[30,18,2,0],[30,21,2,0,"require"],[30,28,2,0],[30,29,2,0,"_dependencyMap"],[30,43,2,0],[31,2,3,0],[32,0,4,0],[33,0,5,0],[34,0,6,0],[35,0,7,0],[36,0,8,0],[37,0,9,0],[38,0,10,0],[39,2,11,7],[39,8,11,13,"WS"],[39,10,11,15],[39,19,11,24,"BaseWS"],[39,31,11,30],[39,32,11,30,"BaseWS"],[39,38,11,30],[39,39,11,31],[40,4,12,4,"createSocket"],[40,16,12,16,"createSocket"],[40,17,12,17,"uri"],[40,20,12,20],[40,22,12,22,"protocols"],[40,31,12,31],[40,33,12,33,"opts"],[40,37,12,37],[40,39,12,39],[41,6,13,8],[41,10,13,12,"_a"],[41,12,13,14],[42,6,14,8],[42,10,14,12],[42,11,14,13,"_a"],[42,13,14,15],[42,16,14,18],[42,20,14,22],[42,21,14,23,"socket"],[42,27,14,29],[42,33,14,35],[42,37,14,39],[42,41,14,43,"_a"],[42,43,14,45],[42,48,14,50],[42,53,14,55],[42,54,14,56],[42,57,14,59],[42,62,14,64],[42,63,14,65],[42,66,14,68,"_a"],[42,68,14,70],[42,69,14,71,"_cookieJar"],[42,79,14,81],[42,81,14,83],[43,8,15,12,"opts"],[43,12,15,16],[43,13,15,17,"headers"],[43,20,15,24],[43,23,15,27,"opts"],[43,27,15,31],[43,28,15,32,"headers"],[43,35,15,39],[43,39,15,43],[43,40,15,44],[43,41,15,45],[44,8,16,12,"opts"],[44,12,16,16],[44,13,16,17,"headers"],[44,20,16,24],[44,21,16,25,"cookie"],[44,27,16,31],[44,30,17,16],[44,37,17,23,"opts"],[44,41,17,27],[44,42,17,28,"headers"],[44,49,17,35],[44,50,17,36,"cookie"],[44,56,17,42],[44,61,17,47],[44,69,17,55],[44,72,18,22],[44,73,18,23,"opts"],[44,77,18,27],[44,78,18,28,"headers"],[44,85,18,35],[44,86,18,36,"cookie"],[44,92,18,42],[44,93,18,43],[44,96,19,22,"opts"],[44,100,19,26],[44,101,19,27,"headers"],[44,108,19,34],[44,109,19,35,"cookie"],[44,115,19,41],[44,119,19,45],[44,121,19,47],[45,8,20,12],[45,13,20,17],[45,19,20,23],[45,20,20,24,"name"],[45,24,20,28],[45,26,20,30,"cookie"],[45,32,20,36],[45,33,20,37],[45,37,20,41],[45,41,20,45],[45,42,20,46,"socket"],[45,48,20,52],[45,49,20,53,"_cookieJar"],[45,59,20,63],[45,60,20,64,"cookies"],[45,67,20,71],[45,69,20,73],[46,10,21,16,"opts"],[46,14,21,20],[46,15,21,21,"headers"],[46,22,21,28],[46,23,21,29,"cookie"],[46,29,21,35],[46,30,21,36,"push"],[46,34,21,40],[46,35,21,41],[46,38,21,44,"name"],[46,42,21,48],[46,46,21,52,"cookie"],[46,52,21,58],[46,53,21,59,"value"],[46,58,21,64],[46,60,21,66],[46,61,21,67],[47,8,22,12],[48,6,23,8],[49,6,24,8],[49,13,24,15],[49,17,24,19,"ws"],[49,19,24,21],[49,20,24,22,"WebSocket"],[49,29,24,31],[49,30,24,32,"uri"],[49,33,24,35],[49,35,24,37,"protocols"],[49,44,24,46],[49,46,24,48,"opts"],[49,50,24,52],[49,51,24,53],[50,4,25,4],[51,4,26,4,"doWrite"],[51,11,26,11,"doWrite"],[51,12,26,12,"packet"],[51,18,26,18],[51,20,26,20,"data"],[51,24,26,24],[51,26,26,26],[52,6,27,8],[52,12,27,14,"opts"],[52,16,27,18],[52,19,27,21],[52,20,27,22],[52,21,27,23],[53,6,28,8],[53,10,28,12,"packet"],[53,16,28,18],[53,17,28,19,"options"],[53,24,28,26],[53,26,28,28],[54,8,29,12,"opts"],[54,12,29,16],[54,13,29,17,"compress"],[54,21,29,25],[54,24,29,28,"packet"],[54,30,29,34],[54,31,29,35,"options"],[54,38,29,42],[54,39,29,43,"compress"],[54,47,29,51],[55,6,30,8],[56,6,31,8],[56,10,31,12],[56,14,31,16],[56,15,31,17,"opts"],[56,19,31,21],[56,20,31,22,"perMessageDeflate"],[56,37,31,39],[56,39,31,41],[57,8,32,12],[57,14,32,18,"len"],[57,17,32,21],[58,8,33,12],[59,8,34,12],[59,16,34,20],[59,21,34,25],[59,28,34,32,"data"],[59,32,34,36],[59,35,34,39,"Buffer"],[59,41,34,45],[59,42,34,46,"byteLength"],[59,52,34,56],[59,53,34,57,"data"],[59,57,34,61],[59,58,34,62],[59,61,34,65,"data"],[59,65,34,69],[59,66,34,70,"length"],[59,72,34,76],[60,8,35,12],[60,12,35,16,"len"],[60,15,35,19],[60,18,35,22],[60,22,35,26],[60,23,35,27,"opts"],[60,27,35,31],[60,28,35,32,"perMessageDeflate"],[60,45,35,49],[60,46,35,50,"threshold"],[60,55,35,59],[60,57,35,61],[61,10,36,16,"opts"],[61,14,36,20],[61,15,36,21,"compress"],[61,23,36,29],[61,26,36,32],[61,31,36,37],[62,8,37,12],[63,6,38,8],[64,6,39,8],[64,10,39,12],[64,11,39,13,"ws"],[64,13,39,15],[64,14,39,16,"send"],[64,18,39,20],[64,19,39,21,"data"],[64,23,39,25],[64,25,39,27,"opts"],[64,29,39,31],[64,30,39,32],[65,4,40,4],[66,2,41,0],[67,0,41,1],[67,3]],"functionMap":{"names":["<global>","WS","WS#createSocket","WS#doWrite"],"mappings":"AAA;OCU;ICC;KDa;IEC;KFc;CDC"},"hasCjsExports":false},"type":"js/module"}]}